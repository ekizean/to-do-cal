<!DOCTYPE html>
<html>

    <head>
        <title>To-Do-Cal | a Drag n Drop To-Do-list and Calendar</title>
        <meta charset="utf-8">
        <meta name = "viewport" content = "width = device-width, initial-scale = 1.0">

        <link rel="stylesheet" type="text/css" media="screen" href="screen.css">
        <link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

        <!-- Bootstrap -->
        <link href="bootstrap-4.0.0-dist/css/bootstrap.css" rel="stylesheet"/>
        <script src="bootstrap-4.0.0-dist/js/bootstrap.js"></script> 
        <script src = "js/bootstrap.min.js"></script>

        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script> 

        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>

        <script>
        $(document).ready(function() {            
            $( "#schedulelist" ).droppable({ 
                drop: function( event, ui ) {                                
                    /* Få resterande element i schedule att flytta uppåt när drar till schedule */
                    var index = ui.draggable.index();      
                    var i; 
                    var myNodelist = document.getElementById("myUL").children;
                    for (i = index +1 ; i < $('#myUL li').length; i++) {
                        var p2 = $(myNodelist[i]).position();
                        var y3 = p2.top;
                        $(myNodelist[i]).offset({top: y3 - 48}); 
                    }
                    ui.draggable.detach().appendTo("#schedulelist");
                 }
            });  
        });            
       </script>       
    </head>

    <body>        
        <div class="container">
            <div class="row">
                <div id="time" class="col-sm-1"> 
                    <p id="p1">07:00</p>
                    <p>08:00</p>
                    <p>09:00</p>
                    <p>10:00</p>
                    <p>11:00</p>
                    <p>12:00</p>
                    <p>13:00</p>
                    <p>14:00</p>
                    <p>15:00</p>
                    <p>16:00</p>
                    <p>17:00</p>
                    <p>18:00</p>
                    <p>19:00</p>
                    <p>20:00</p>
                    <p>21:00</p>
                    <p>22:00</p>
                </div>
                <div class="col-sm-4" id="schedule">
                    <div class="droppable" id="slots" class="ui-widget-header">
                        <ul id="schedulelist">
                            <div class="ruta" id="ruta1"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div><div class="ruta"></div>
                        </ul>
                    </div>     
                </div>
                <div class="col-sm-4" id="todo">
                    <div id="myDIV" class="header">
                        <h3>To-Do:s</h3>
                        <input type="text" id="myInput" placeholder="Event..." autofocus>
                        <span onclick="newElement()" class="addBtn">Add</span>
                        <script>document.onkeydown = function (e) {
                            var keyCode = e.keyCode;
                            if(keyCode == 13) {
                                newElement();
                            }
                        }
                        </script>
                    </div>
                    <div id="droppable" class="droppable" class="ui-widget-header">
                        <ul id="myUL"></ul>                
                    </div>
                </div>   
            </div>
            <script src="app.js"></script>
        </div>
    </body>
</html>
